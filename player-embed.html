<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>HeyGen Player Embed</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    #playerContainer { width: 640px; height: 360px; border: 1px solid #ccc; }
  </style>
</head>
<body>
  <h2>HeyGen Player Embed Test Hoo Ha</h2>
  <div id="playerContainer"></div>
  <button id="startBtn">Start Avatar</button>

  <!-- âœ… Load your UMD bundle from GitHub Pages -->
  <script src="https://docstar0.github.io/heygen-player-v2-cdn/dist/heygen-player.umd.js"></script>

  <script>
    console.log("[embed] Bootingâ€¦");
    console.log("[debug] window.HeyGenPlayer =", window.HeyGenPlayer);

    const startBtn = document.getElementById("startBtn");

    startBtn.onclick = async () => {
      console.log("[embed] ğŸš€ creating playerâ€¦");
      try {
        if (!window.HeyGenPlayer) {
          throw new Error("window.HeyGenPlayer is undefined. UMD did not load properly.");
        }

        // Create player
        const player = await window.HeyGenPlayer.create({
          token: "REPLACE_WITH_YOUR_TOKEN",   // TODO: inject dynamically later
          avatarId: "Dexter_Doctor_Standing2_public",
          kbId: "14b2ed85d8804bf5bef881da5a7e819e",
          container: document.getElementById("playerContainer"),
        });

        console.log("[embed] ğŸ‰ player created:", player);

        // Start avatar
        await player.startAvatar();
        console.log("[embed] âœ… avatar started");
      } catch (err) {
        console.error("[embed] âŒ failed:", err);
      }
    };
  </script>
</body>
</html>
