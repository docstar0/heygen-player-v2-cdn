<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>HeyGen Player Debug</title>
  <style>
    body { background:#111; color:#0f0; font-family:monospace; }
    #container { width:640px; height:360px; background:#000; margin:20px auto; display:flex; justify-content:center; align-items:center; }
    button { margin:10px; padding:8px 14px; font-size:14px; }
  </style>
</head>
<body>
  <h3>HeyGen Player Debug (Option 3 - Dummy Token)</h3>
  <div id="container"></div>
  <button id="startBtn">‚ñ∂ Start Avatar</button>
  <button id="stopBtn">‚èπ Stop</button>

  <!-- Load your new UMD build -->
<script src="https://docstar0.github.io/heygen-player-v2-cdn/dist/heygen-player.umd.js"
        onload="console.log('[player-embed] ‚úÖ UMD loaded')"
        onerror="console.error('[player-embed] ‚ùå failed to load UMD')">
</script>
<script>
  console.log("[debug] window.HeyGenPlayer =", window.HeyGenPlayer);
</script>



    let player = null;
    const container = document.getElementById("container");
    const startBtn = document.getElementById("startBtn");
    const stopBtn  = document.getElementById("stopBtn");

    const DUMMY_TOKEN = "FAKE_TOKEN";
    const AVATAR_ID   = "Dexter_Doctor_Standing2_public";
    const KB_ID       = "14b2ed85d8804bf5bef881da5a7e819e";

    startBtn.onclick = async () => {
      try {
        console.log("[player-embed] üõ† creating player with HeyGenPlayer.create‚Ä¶");
        player = await window.HeyGenPlayer.create({
          token: DUMMY_TOKEN,
          avatarId: AVATAR_ID,
          kbId: KB_ID,
          container
        });
        console.log("[player-embed] üéâ player created:", player);

        console.log("[player-embed] üöÄ starting avatar stream (will fail with dummy token)");
        try {
          await player.startAvatar();
        } catch (err) {
          console.warn("[player-embed] Expected failure (dummy token):", err);
        }
      } catch (e) {
        console.error("[player-embed] ‚ùå failed to init:", e);
      }
    };

    stopBtn.onclick = async () => {
      if (player) {
        console.log("[player-embed] ‚èπ stopping player");
        try { await player.stopAvatar(); } catch {}
        player = null;
      }
    };
  </script>
</body>
</html>
